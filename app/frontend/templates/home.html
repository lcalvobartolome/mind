{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<style>
.hero-full {
    background-size: cover;
    background-position: center;
    width: 100vw;
    max-height: 700px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    padding: 40px 20px 80px 20px;
    margin: 0;
    
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
}

.hero-full h1,
.hero-full h3,
.hero-full p {
    text-shadow: 1px 1px 5px rgba(0,0,0,0.7);
}

.hero-full h1 {
    margin-bottom: 20px;
}

.hero-full h3 {
    margin-bottom: 40px;
}

.hero-full p {
    margin-bottom: 0;
}

@media (max-width: 768px) {
    .hero-full {
        max-height: 500px;
        padding: 20px 10px 40px 10px;
    }
    .hero-full h1 {
        margin-bottom: 15px;
    }
    .hero-full h3 {
        margin-bottom: 30px;
    }
}

.mt-5, .my-5 {
    margin-top: 0rem !important;
}

.pills-container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin: 40px 0;
}

.pill {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    background-color: #f8f9fa;
    border-radius: 20px;
    padding: 20px;
    flex: 1;
    text-decoration: none;
    color: inherit;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transition: transform 0.2s, box-shadow 0.2s;
}

.pill:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    text-decoration: none;
}

.pill img, .pill i {
    width: 40px;
    height: 40px;
    margin-bottom: 10px;
    font-size: 40px;
}

.pill h4 {
    margin: 10px 0 5px 0;
    font-size: 1.1em;
    font-weight: bold;
}

.pill p {
    margin: 0;
    font-size: 0.9em;
    color: #555;
    font-weight: 300;
}

.pill-red {
    color: #f1948a;
    border: 2px solid #f1948a;
}

.pill-red:hover {
    color: #f1948a;
}

.pill-blue {
    color: #85c1e9;
    border: 2px solid #85c1e9;
}

.pill-blue:hover {
    color: #85c1e9;
}

.pill-green {
    color: #82e0aa;
    border: 2px solid #82e0aa;
}

.pill-green:hover {
    color: #82e0aa;
}

.pill-orange {
    color: #f5b041;
    border: 2px solid #f5b041;
}

.pill-orange:hover {
    color: #f5b041;
}

@media (max-width: 768px) {
    .pills-container {
        flex-direction: column;
        gap: 15px;
    }

    .pill {
        width: 100%;
    }
}
</style>

<div class="hero-full" style="background-image: url('{{ url_for('static', filename='images/back_image.jpg') }}');">
    <h1>Welcome to MIND</h1>
    <h3>Multilingual Inconsistent Notion Detection</h3>
    <p>A topic-modeling and LLM-based pipeline designed to identify discrepancies across multilingual knowledge bases</p>
</div>

<br>
<hr>

{% if user_id %}
<div class="pills-container">
    <a href="/datasets" class="pill pill-red">
        <i class="bi bi-database"></i>
        <h4>Datasets for detection</h4>
        <p>Browse and preview your datasets available for analysis across the platform</p>
    </a>
    <a href="/preprocessing" class="pill pill-blue">
        <i class="bi bi-funnel"></i>
        <h4>Preprocessing</h4>
        <p>Segment, translate and prepare your data, including topic modeling processes</p>
    </a>
    <a href="/detection" class="pill pill-green">
        <i class="bi bi-graph-up"></i>
        <h4>Detection</h4>
        <p>Analyze multi-topic discrepancies and extract insights using MIND’s core detection features</p>
    </a>
</div>
{% else %}
<div class="pills-container">
    <a href="/login" class="pill pill-blue">
        <i class="bi bi-box-arrow-in-right"></i>
        <h4>Log In</h4>
        <p>Sign in to your account</p>
    </a>
    <a href="/sign-up" class="pill pill-green">
        <i class="bi bi-person-plus"></i>
        <h4>Sign Up</h4>
        <p>Create a new account</p>
    </a>
</div>
{% endif %}

<hr>

<script>
window.addEventListener('load', function() {
    const hero = document.querySelector('.hero-full');
    const img = new Image();
    img.src = '{{ url_for('static', filename='images/back_image.jpg') }}';
    img.crossOrigin = "Anonymous";

    img.onload = function() {
        const canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);

        const data = ctx.getImageData(0, 0, img.width, img.height).data;
        let r=0,g=0,b=0,count=0;

        for (let i=0; i<data.length; i+=4*100) { // cada 100 píxeles para velocidad
            r += data[i];
            g += data[i+1];
            b += data[i+2];
            count++;
        }

        r = r/count;
        g = g/count;
        b = b/count;

        const luminance = (0.299*r + 0.587*g + 0.114*b)/255;

        hero.style.color = luminance > 0.5 ? 'rgb(40, 40, 40)' : 'rgb(250, 250, 250)';
    }
});
</script>

{% include "about_us.html" %}

{% endblock %}
